<%
@title = 'Plans'
@heading = 'Plans'
@subheading = 'List'
@nav_item = 'plans'
%>

<div style="text-align: right; padding: 10px 0px;">
  <% if can? :new, Plan %><%= link_to "New Plan", new_admin_plan_path, class: "btn btn-primary" %><% end %>
</div>

<% if @plans.empty? then %>
<p>No plans found</p>
<% else %>
<table class="table table-condensed table-striped">
	<thead>
		<tr>
			<th>Name</th>
			<th>Active</th>
			<th>Public</th>
			<th>Currency</th>
			<th>Amount</th>
			<th>Trial Period Days</th>
		</tr>
	</thead>
	<tbody>
<% @plans.each do |plan| %>
		<tr>
			<td><%= link_to_if can?(:show, plan), plan.name, admin_plan_path(plan) %></td>
			<td><%= plan.active %></td>
			<td><%= plan.public %></td>
			<td><%= plan.currency %></td>
			<td><%= plan.amount %> / <% if plan.interval_count > 1 %><%= number_with_precision(plan.interval_count, :precision => 0) %> <% end %><%= plan.interval %></td>
			<td><%= number_with_precision(plan.trial_period_days, :precision => 0) %></td>
		</tr>
<% end %>
	</tbody>
</table>
<%= paginate @plans %>
<% end %>